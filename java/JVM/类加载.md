JVM

内存分配

堆、栈、方法区、直接内存

除了以上四种，还有一些额外优化。比如栈上分配、TLAB。

栈上分配：经过逃逸分析，发现对象只在方法内部使用，则可直接分配到栈上

TLAB：为了缓解多线程并发申请对象分配引起的冲突，为每个线程分配一个私有且独立的堆空间。优先在TLAB上分配，TLAB内存不够，才在公共堆上进行分配。

对象分配的路径

![img](https://upload-images.jianshu.io/upload_images/5362354-0649cf8c2423d71f.png)



类

生命周期

加载 -〉 链接 -〉初始化-》回收

回收标准：

1、该类所有的实例都已经被回收，也就是说Java堆中不存在该类的任何实例；

2、加载该类的ClassLoader已经被回收；

3、该类对应的java.lang.Class对象没有在任何地方被引用，无法在任何地方通过反射访问该类的方法。



对象

内存分配-》初始化-〉使用-》回收









对象引用

强引用 、弱引用、软引用、影子引用































